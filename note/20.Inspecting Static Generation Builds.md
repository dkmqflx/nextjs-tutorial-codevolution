- 기존의 `.next` 폴더 삭제 후, `yarn build` 명령어 실행

- build가 끝나고 터미널을 확인해 본다
  - the first thing to notice is that the output displays information about each route in our application

```bash
info  - Generating static pages (4/4)
info  - Finalizing page optimization

Page                              Size     First Load JS
┌ ○ /                             265 B          63.9 kB
├   /_app                         0 B            63.7 kB
├ ○ /404                          3.18 kB        66.8 kB
└ ● /users                        372 B            64 kB
+ First Load JS shared by all     63.7 kB
  ├ chunks/framework.923004.js    42 kB
  ├ chunks/main.e8418c.js         20.3 kB
  ├ chunks/pages/_app.ec16ec.js   555 B
  ├ chunks/webpack.43375c.js      760 B
  └ css/120f2e2270820d49a21f.css  209 B

λ  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)
○  (Static)  automatically rendered as static HTML (uses no initial props)
●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)
   (ISR)     incremental static regeneration (uses revalidate in getStaticProps)
```

- 세개의 칼럼이 있다

  - Page
    - page refers to the route
  - Size
    - size refers to the size of assets downloaded when navigating to the corresponding page client side
  - First Loaded JS
    - iFirst Loaded JS refers to the size of the assets downloaded from the server when visiting the page

- First Load JS shared by all

  - this refers to the code that is downloaded irrespective of the route you're hitting in the browser
  - this contains the css from globals.css, some webpack runtime code, framework code, node modules rendor code like react for example and some code related to the pages and components in our application
  - we also have code from \_app.js which is a file we haven't really talked about till now
  - we will discuss more about it later on in the series
  - but at the moment all you have to know is that \_app.js is a component that wraps every page in our application and the corresponding code is generated as part of the build output
  - now all of this is shown as a separate metric and the overall size is 63.6 kilobytes (First Load JS shared by all 옆의 숫자)

- let's now move on to the individual pages generated we have the root page corresponding to index.js
- the size of the page is 265 bytes
- but if you navigate to the home page in the browser to 65 bytes plus the first load shared bundle of 63.6 kb is also downloaded resulting in 63.9 kb as the first load js size for the index route
- we then have \_app which is already taken care of in the first load bundle and hence the size is zero bytes
- after that we have a 404 page which we did not create but is generated by next js for us
- if you can recollect from the routing section i mentioned that next js will serve a default 404 page its size is 3.18 kb
- and the first load is 63.6 which results in a total size of 66.8 kb
- the last page is the users page corresponding to users.js
- its size is 370 bytes and first load size is 63.6 which adds up to 64 kb
- what is great is that the first load size is colored green yellow or red
- green refers to performant applications which is what you should always aim for
- so that is the first part i wanted to cover in this video

---

```bash
Page                              Size     First Load JS
┌ ○ /                             265 B          63.9 kB
├   /_app                         0 B            63.7 kB
├ ○ /404                          3.18 kB        66.8 kB
└ ● /users                        372 B            64 kB
+ First Load JS shared by all     63.7 kB
  ├ chunks/framework.923004.js    42 kB
  ├ chunks/main.e8418c.js         20.3 kB
  ├ chunks/pages/_app.ec16ec.js   555 B
  ├ chunks/webpack.43375c.js      760 B
  └ css/120f2e2270820d49a21f.css  209 B

λ  (Server)  server-side renders at runtime (uses getInitialProps or getServerSideProps)
○  (Static)  automatically rendered as static HTML (uses no initial props)
●  (SSG)     automatically generated as static HTML + JSON (uses getStaticProps)
   (ISR)     incremental static regeneration (uses revalidate in getStaticProps)
```

- now for the second part let's focus on the legend that next js provides for the type of pages generated
- beside each page generated next js adds an indication of the type of pre-rendering
- for our root route that is index.js we have a hollow circle
- if you take a look at the legend provided a hollow circle indicates static generation
- so the page is automatically rendered as static html and does not fetch any external data
- same is the case with our 404 route as well
- the page does not fetch external data and is automatically rendered as static html
- but if we take a look at the user's route we have a filled circle if we refer to the legend
- a filled circle indicates SSG
- SSG stands for static site generation and refers to a page that is automatically generated as html plus json
- such a page uses getStaticProps function to fetch the external data
- so this sort of an indication really helps you understand the pre-rendering feature when we build our application
- now there is also server and incremental static generation which we will talk about in the next few videos

---

- all right let's now move on to the third part of this video which is again really important and that is understanding the build output
- earlier i mentioned that next js generates the build output into the .next folder
- this folder as you can see contains few folders and several files
- to serve our application for any incoming request from the browser all of these files and folders are required
- however we can primarily focus on the server and static folders
- within the server folder we have a pages folder within this folder we have a few different file types
- let's take a look at the html files in our build info
- we see that the root index.js file is a static html page
- the same can be found here in the pages folder
- we then have 404 which is again a static html page
- an unexpected page here is the 500 html page which is a default page that next js will render for 500 editors in the request
- it is not present as part of the build info under routes
- but you can see that next js does mention 4 out of 4 html pages were generated
  ```bash
  info  - Generating static pages (4/4)
  info  - Finalizing page optimization
  ```
- 500.html is the fourth page but will not be displayed as a route in this build info
- the last html file in the pages folder is the users.html file
- this corresponds to the user's route and as you can see this is of type SSG
- so it is generated as static html plus json and the json can be found in users.json
- the file contains the data returned from getStaticProps which is the user's prop required for the page

---

- now apart from the html and json files you might also see javascript files
- these files contain code that cannot be sent to the browser but they are a transformation of the pages and components written in our app
- for example you can see here in users.js, the user and userList components are transformed into react elements
- but if these aren't sent to the browser what about hydration
- this is where the static folder comes into picture
- within static within chunks we have another pages folder
- this folder contains javascript files which can be sent to the browser
- typically it will contain code to hydrate a page and make it interactive
- outside the pages folder there are a few other files which are sent to the browser but it is not specific to the code we write
- it is framework code render code like react polyfills a pack code etc
- so that is pretty much what i wanted to cover in this video on inspecting and understanding static generation builds
- but apart from what we have just learned there is one very important point to understand when we run this built application for production
